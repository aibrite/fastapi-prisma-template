datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider             = "prisma-client-py"
  recursive_type_depth = 5
}

model User {
  id           String      @id @default(uuid())
  createdAt    DateTime    @default(now())
  updatedAt    DateTime?   @updatedAt
  name         String      @db.VarChar(255)
  familyName   String      @db.VarChar(255)  
  email        String      @unique
  password     String?
  roles        String[] 
  provider     String
  providerId   String?
  providerRefreshToken String?
  refreshToken String?
  verifications UserVerifications[]
}

model UserVerifications {
  id           String      @id @default(uuid())
  userId       String
  verification String
  createdAt    DateTime    @default(now())
  updatedAt    DateTime?   @updatedAt
  verifiedAt   DateTime?
  active       Boolean     @default(true)
  user         User        @relation(fields: [userId], references: [id])
  @@index([userId, verification])
}
